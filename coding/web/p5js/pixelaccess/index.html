<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>05 - Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js - Coding e Paduli</title>
    
    <meta name="description" content="Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js">
    
        <meta property="og:title" content="05 - Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js" />
<meta property="og:description" content="Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://codingepaduli.github.io/coding/web/p5js/pixelaccess/" />
<meta property="og:image" content="http://codingepaduli.github.io/static/wifi-5.svg"/>
<meta property="article:published_time" content="2020-09-26T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-09-26T00:00:00+00:00" />

    
    
        <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://codingepaduli.github.io/static/wifi-5.svg"/>

<meta name="twitter:title" content="05 - Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js"/>
<meta name="twitter:description" content="Accesso ai pixel di un&#39;immagine con la libreria grafica p5.js"/>

    

    <link rel="stylesheet" href="/css/style.css">

    

    <link rel="shortcut icon" href="/static/wifi-5.svg" type="image/svg+xml">

    
        <meta name="keywords" content="coding  programmazione  open-source  sviluppo  web  ">
</head>
<body class="body">
    <div class="container container--outer">
        <header class="header">
	<div class="container header__container">
		
	<div class="logo">
		<a class="logo__link" href="/" title="Coding e Paduli" rel="home">
			<div class="logo__item logo__text">
					<div class="logo__title">Coding e Paduli</div>
					<div class="logo__tagline">Ennesimo sito/blog di programmazione ed informatica in generale</div>
				</div>
		</a>
	</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="/coding/">
				
				<span class="menu__text">Coding e tools</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/interesting/">
				
				<span class="menu__text">Interessanti</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/opensource/">
				
				<span class="menu__text">Open Source</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/webapp/">
				
				<span class="menu__text">WebApp</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
        <div class="wrapper flex">
            <div class="primary">
            
<style>
    :fullscreen {
        overflow-x :hidden;
        overflow-y: hidden;
    }
</style>

<main class="main" role="main">
  <article class="post">
    <header class="post__header">
      
      <div class="post__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2020-09-26T00:00:00Z">September 26, 2020</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2l1 2h8v11h-16v-13z"/></svg><span class="meta__text"><a class="meta__link" href="/categories/coding/" rel="category">coding</a>, <a class="meta__link" href="/categories/web/" rel="category">web</a>, <a class="meta__link" href="/categories/p5.js/" rel="category">p5.js</a>
	</span>
</div></div>
    </header><div class="content post__content clearfix">
      <h1 id="accesso-ai-pixel-di-unimmagine-con-la-libreria-grafica-p5js">Accesso ai pixel di un&rsquo;immagine con la libreria grafica p5.js</h1>
<p>Di seguito, l&rsquo;esempio funzionante in ambiente web dell&rsquo;accesso ai pixel dell&rsquo;immagine caricata nel canvas.</p>
<p>Si ricorda che per motivi di sicurezza, è necessario dare il permesso al browser di accedere ai dati del canvas, altrimenti tutti i pixel restituiranno colore RGB=(255, 255, 255);</p>
<p>Per leggere l&rsquo;immagine si fa uso della funzione <code>loadImage</code>, come di seguito riportato:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">img</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">loadImage</span>(<span style="color:#e6db74">&#39;https://live.staticflickr.com/2838/9541969423_9c513ed6a1_b.jpg&#39;</span>);
</code></pre></div><p>Si fa uso della variabile <code>drawingContext</code> di p5.js, che effettua quel che in JavaScript corrisponde a <code>canvas.getContext('2d');</code> e che permette l&rsquo;accesso diretto ai dati del canvas, come di seguito riportato:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">canvas</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createCanvas</span>(<span style="color:#ae81ff">800</span>, <span style="color:#ae81ff">700</span>).<span style="color:#a6e22e">parent</span>(<span style="color:#e6db74">&#39;pixelAccess&#39;</span>);
<span style="color:#a6e22e">ctx</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">canvas</span>.<span style="color:#a6e22e">drawingContext</span>;
</code></pre></div><p>Infine, si fa uso della funzione <code>ctx.getImageData</code> per accedere al singolo pixel (gli ultimi due argomenti indicano un&rsquo;area di 1 pixel per 1 pixel):</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#a6e22e">pixel</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">ctx</span>.<span style="color:#a6e22e">getImageData</span>(<span style="color:#a6e22e">mouseX</span>, <span style="color:#a6e22e">mouseY</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">data</span>;
</code></pre></div><p>A questo punto si può accedere ai colori del pixel, ricordando che sono codificati in formato RGB, quindi in prima posizione si trova il rosso, in seconda il verde ed in terza il blu:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">red</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">0</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">green</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">1</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">blue</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">2</span>];
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">alpha</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">pixel</span>[<span style="color:#ae81ff">3</span>] <span style="color:#f92672">/</span> <span style="color:#ae81ff">255</span>;
</code></pre></div><p>Di seguito, l&rsquo;implementazione dell&rsquo;applicazione per l&rsquo;accesso ai pixel di un&rsquo;immagine.</p>
<div id="pixelAccess"></div>

    </div>
  </article>
</main>



<script src="/static/coding/web/p5js/pixelAccess.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.1.9/p5.js"></script>


<nav class="pager flex">
	<div class="pager__item pager__item--prev">
		<a class="pager__link" href="/coding/web/p5js/progettoarknoid_exe_soluzione/" rel="prev">
			<span class="pager__subtitle">«&thinsp;Previous</span>
			<p class="pager__title">04.4 - Soluzione progetto Arknoid</p>
		</a>
	</div>
</nav>
<div class="article-content">
  <h2>Commenti</h2>
  <p>Puoi commentare registrandoti o accedendo al tuo account <a href="https://mastodon.it/" style="color: #e22d30;">Mastodon</a> e rispondendo a questo <a class="link" href="https:///@/" style="color: #e22d30;">post</a>.</p>
  <p><a class="button" href="https:///interact/?type=reply">Rispondi</a></p>
  <p id="mastodon-comments-list"><button id="load-comment">Leggi tutti i commenti</button></p>
  <noscript><p>E' necessario attivare JavaScript per leggere i commenti.</p></noscript>
  <script src="/static/js/purify.min.js"></script>
  <script type="text/javascript">
    function escapeHtml(unsafe) {
      return unsafe
           .replace(/&/g, "&amp;")
           .replace(/</g, "&lt;")
           .replace(/>/g, "&gt;")
           .replace(/"/g, "&quot;")
           .replace(/'/g, "&#039;");
   }

    document.getElementById("load-comment").addEventListener("click", function() {
      document.getElementById("load-comment").innerHTML = "Lettura in corso...";
      fetch('https:///api/v1/statuses//context')
        .then(function(response) {
          return response.json();
        })
        .then(function(data) {
          if(data['descendants'] &&
             Array.isArray(data['descendants']) &&
            data['descendants'].length > 0) {
              document.getElementById('mastodon-comments-list').innerHTML = "";
              data['descendants'].forEach(function(reply) {
                reply.account.display_name = escapeHtml(reply.account.display_name);
                reply.account.emojis.forEach(emoji => {
                  reply.account.display_name = reply.account.display_name.replace(`:${emoji.shortcode}:`,
                    `<img src="${escapeHtml(emoji.static_url)}" alt="Emoji ${emoji.shortcode}" height="20" width="20" />`);
                });
                mastodonComment =
                  `<div class="mastodon-comment">
                     <div class="avatar">
                       <img src="${escapeHtml(reply.account.avatar_static)}" height=60 width=60 alt="">
                     </div>
                     <div class="content">
                       <div class="author">
                         <a href="${reply.account.url}" rel="nofollow">
                           <span>${reply.account.display_name}</span>
                           <span class="disabled">${escapeHtml(reply.account.acct)}</span>
                         </a>
                         <a class="date" href="${reply.uri}" rel="nofollow">
                           ${reply.created_at.substr(0, 10)}
                         </a>
                       </div>
                       <div class="mastodon-comment-content">${reply.content}</div>
                     </div>
                   </div>`;
                document.getElementById('mastodon-comments-list').appendChild(DOMPurify.sanitize(mastodonComment, {'RETURN_DOM_FRAGMENT': true}));
              });
          } else {
            document.getElementById('mastodon-comments-list').innerHTML = "<p>Nessun commento trovato.</p>";
          }
        });
      });
  </script>
</div>


            </div>
            
        </div>
        <footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 Coding e Paduli.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
    </div>
<script async defer src="/js/menu.js"></script>
<script data-goatcounter="https://codingepaduli-github.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
</body>
</html>
